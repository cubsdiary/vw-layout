webpackJsonp([29],{"0mZi":function(e,a){},"7Q3a":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("Dd8w"),s=t.n(r),c=t("qwAB"),i=t("NYxO"),n=t("F4+m"),d={name:"vehicleManagement",components:{Scroll:c.a},mixins:[n.a,n.b],data:function(){return{editState:!1,check:[]}},mounted:function(){this._getMyCar()},computed:s()({checkInfos:function(){var e={length:0,default:!1};return this.check.forEach(function(a,t){a.check&&(0===t&&(e.default=!0),e.length++)}),e},defaultCarId:function(){var e=0;return this.myCar.forEach(function(a,t){a.defaultFlag&&(e=t)}),e}},Object(i.c)(["myCar","userInfo"])),methods:s()({_goBack:function(){this.$router.go(-1)},_getMyCar:function(){var e=this;this.$get(this.f6Url+"/api/clientUserCar?userId="+this.userInfo.fUserId,this.headers_2,function(a){401===a.code?e.refreshToken(e._getMyCar):200===a.code&&(e.updateCarList(a.data),e.checkArr())})},_deleteMyCar:function(e){var a=this;this.$delete(this.f6Url+"/api/clientUserCar",this.headers_2,function(e){401===e.code?a.refreshToken(a._deleteMyCar):200===e.code&&(a.checkInfos.length--,0===a.checkInfos.length&&!1===a.checkInfos.default&&(a.editState=!1,a._getMyCar()))},{carBrandLogo:this.myCar[e].exhaustVolume+"ꡖ"+this.myCar[e].manufacturerName+"ꡖ"+this.myCar[e].year+"ꡖ"+this.myCar[e].time+"ꡖ"+this.myCar[e].evehicleSystem+"ꡖ"+this.myCar[e].transmissionDesc+"ꡖ"+this.myCar[e].brandName+"ꡖ"+this.myCar[e].imageSrc,carId:this.myCar[e].carId,carNumber:this.myCar[e].carNumber,carVin:this.myCar[e].carVin,clientAppId:this.myCar[e].clientAppId,clientUserId:this.myCar[e].clientUserId,defaultFlag:this.myCar[e].defaultFlag,distance:this.myCar[e].distance,externalUserId:this.myCar[e].externalUserId,userCarId:this.myCar[e].userCarId,userId:this.myCar[e].userId})},_goAddcarTabbar:function(){var e=this;this.editState?this.check.forEach(function(a,t){a.check&&e._deleteMyCar(t),e.checkInfos.length===e.check.length&&(e.checkInfos.default=!1),!a.check&&e.checkInfos.default&&e.modifyCar({carBrandLogo:e.myCar[t].exhaustVolume+"ꡖ"+e.myCar[t].manufacturerName+"ꡖ"+e.myCar[t].year+"ꡖ"+e.myCar[t].time+"ꡖ"+e.myCar[t].evehicleSystem+"ꡖ"+e.myCar[t].transmissionDesc+"ꡖ"+e.myCar[t].brandName+"ꡖ"+e.myCar[t].imageSrc,carId:e.myCar[t].carId,carNumber:e.myCar[t].carNumber,carVin:e.myCar[t].carVin,clientAppId:e.myCar[t].clientAppId,clientUserId:e.myCar[t].clientUserId,defaultFlag:1,distance:e.myCar[t].distance,externalUserId:e.myCar[t].externalUserId,userCarId:e.myCar[t].userCarId,userId:e.myCar[t].userId},e._callbackModify)}):this.$router.push("/addcar-tabbar?type=add")},_callbackModify:function(){this.checkInfos.default=!1,0===this.checkInfos.length&&!1===this.checkInfos.default&&(this.editState=!1,this._getMyCar())},_editCar:function(){this.editState=!this.editState,this.editState&&this.checkArr()},_setCarDefault:function(e,a){if(1!==e.defaultFlag){var t=this.defaultCarId,r={carBrandLogo:e.exhaustVolume+"ꡖ"+e.manufacturerName+"ꡖ"+e.year+"ꡖ"+e.time+"ꡖ"+e.evehicleSystem+"ꡖ"+e.transmissionDesc+"ꡖ"+e.brandName+"ꡖ"+e.imageSrc,carId:e.carId,carNumber:e.carNumber,carVin:e.carVin,clientAppId:e.clientAppId,clientUserId:e.clientUserId,defaultFlag:1,distance:e.distance,externalUserId:e.externalUserId,userCarId:e.userCarId,userId:e.userId},s={carBrandLogo:this.myCar[t].exhaustVolume+"ꡖ"+this.myCar[t].manufacturerName+"ꡖ"+this.myCar[t].year+"ꡖ"+this.myCar[t].time+"ꡖ"+this.myCar[t].evehicleSystem+"ꡖ"+this.myCar[t].transmissionDesc+"ꡖ"+this.myCar[t].brandName+"ꡖ"+this.myCar[t].imageSrc,carId:this.myCar[t].carId,carNumber:this.myCar[t].carNumber,carVin:this.myCar[t].carVin,clientAppId:this.myCar[t].clientAppId,clientUserId:this.myCar[t].clientUserId,defaultFlag:0,distance:this.myCar[t].distance,externalUserId:this.myCar[t].externalUserId,userCarId:this.myCar[t].userCarId,userId:this.myCar[t].userId};this.modifyCar(r),this.modifyCar(s),this.updateCarDefault({defaultId:t,modifyId:a})}},_checkCar:function(e){this.check[e].check?this.$set(this.check[e],"check",!1):this.$set(this.check[e],"check",!0)},checkArr:function(){for(var e=[],a=0;a<this.myCar.length;a++)e[a]={check:!1};this.check=e}},Object(i.b)(["updateCarList","updateCarDefault"]))},h={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"vehicle-management",attrs:{flexContainer:""}},[t("div",{staticClass:"action-bar"},[t("div",{staticClass:"go-back",on:{click:e._goBack}}),e._v(" "),t("div",{staticClass:"font"},[e._v("我的车库")]),e._v(" "),e.myCar.length>0?t("div",{staticClass:"management",on:{click:e._editCar}},[e._v(e._s(e.editState?"取消":"编辑"))]):e._e()]),e._v(" "),t("Scroll",{staticClass:"car-content"},[t("ul",{staticClass:"con"},e._l(e.myCar,function(a,r){return e.check.length>0?t("li",{key:r},[t("div",{staticClass:"li-con",style:{transform:e.editState?"translateX(28px)":"translateX(0px)",transition:"all .3s"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.editState,expression:"editState"}],staticClass:"check-btn"},[t("div",{staticClass:"check-img",class:e.check[r].check?"check":"nocheck",on:{click:function(a){e._checkCar(r)}}})]),e._v(" "),t("div",{staticClass:"img"},[t("img",{attrs:{src:e.carLogoUrl+a.imageSrc,alt:""}})]),e._v(" "),t("div",{staticClass:"con"},[t("h2",[e._v(e._s(a.manufacturerName+" - "+a.evehicleSystem))]),e._v(" "),t("p",{staticClass:"p1"},[t("span",[e._v(e._s(a.year))]),e._v("  "),t("span",[e._v(e._s(a.transmissionDesc))])]),e._v(" "),t("p",{staticClass:"p2"},[t("span",[e._v(e._s(a.carNumber))]),0!==a.distance?t("span",[e._v("丨")]):e._e(),e._v(" "),0!==a.distance?t("span",[e._v(e._s(a.distance)+"km")]):e._e()])]),e._v(" "),e.editState?e._e():t("div",{staticClass:"right"},[t("div",{staticClass:"btn",class:a.defaultFlag?"active":"common",on:{click:function(t){e._setCarDefault(a,r)}}},[e._v("\n            "+e._s(a.defaultFlag?"已设为默认":"设为默认")+"\n            ")])])])]):e._e()}))]),e._v(" "),t("div",{staticClass:"submit-btn",on:{click:e._goAddcarTabbar}},[t("span",[e._v(e._s(e.editState?"删除车辆":"新增车辆"))])])],1)},staticRenderFns:[]};var l=t("VU/8")(d,h,!1,function(e){t("0mZi")},"data-v-544e199c",null);a.default=l.exports}});