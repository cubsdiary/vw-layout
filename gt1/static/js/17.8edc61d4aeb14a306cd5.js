webpackJsonp([17],{AtMv:function(t,a){},NGQ6:function(t,a){},e5DI:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("Dd8w"),s=e.n(i),r={name:"swiper",props:{duration:{default:500},slidetype:{default:"right"},recommends:{required:!0}},data:function(){return{touchInfo:{startX:0,startY:0,endX:0,endY:0,moveX:0,moveY:0,startTime:0,endTime:0},imgIndex:0,domLeft:0,bridge:0,translate3d:"",sliderDom:0,animateTime:0,sliderGroupDom:0,screenWidth:0}},methods:{touchS:function(t){var a=t.touches[0];this.touchInfo.startX=a.pageX,this.touchInfo.startY=a.pageY,this.touchInfo.startTime=parseInt(t.timeStamp)},touchE:function(t){var a=t.changedTouches[0];this.touchInfo.endX=a.pageX,this.touchInfo.endY=a.pageY,this.touchInfo.endTime=parseInt(t.timeStamp);var e=this.touchInfo.startX-this.touchInfo.endX,i=this.touchInfo.startY-this.touchInfo.endY,s=this.touchInfo.endTime-this.touchInfo.startTime;Math.abs(e)>Math.abs(i)&&(e>0?s>20&&s<300?(this.nextImg(),this.$emit("carid",this.imgIndex)):e>=this.sliderGroupDom/2?(this.nextImg(),this.$emit("carid",this.imgIndex)):this.goBackImg(parseInt(Math.abs(this.bridge)/this.sliderGroupDom*this.duration)):s>20&&s<300?(this.prevImg(),this.$emit("carid",this.imgIndex)):Math.abs(e)>=this.sliderGroupDom/2?(this.prevImg(),this.$emit("carid",this.imgIndex)):this.goBackImg(parseInt(Math.abs(this.bridge)/this.sliderGroupDom*this.duration)))},touchM:function(t){var a=t.touches[0];this.touchInfo.moveX=a.pageX,this.touchInfo.moveY=a.pageY,this.bridge=this.touchInfo.startX-this.touchInfo.moveX,this.touchInfo.startX,this.touchInfo.moveX,this.animateImg(!1,0)},tapDom:function(){this.$emit("tapcard",!0)},setDefault:function(t,a){this.$emit("setdefault",{index:a,item:t})},transitionEnd:function(){this.bridge=0,this.goBackImg(0)},nextImg:function(t){this.imgIndex!==this.recommends.length-1&&this.recommends.length&&(this.imgIndex+=1);var a=0;a="init"===t?this.duration:parseInt((this.sliderGroupDom-Math.abs(this.bridge))/this.sliderGroupDom*this.duration),this.animateImg(!0,a)},prevImg:function(t){0!==this.imgIndex&&(this.imgIndex-=1);var a=0;a="init"===t?this.duration:parseInt((this.sliderGroupDom-Math.abs(this.bridge))/this.sliderGroupDom*this.duration),this.animateImg(!0,a)},goBackImg:function(t){this.animateTime=t,0===this.imgIndex?this.domLeft=(this.screenWidth-this.sliderGroupDom)/2:this.domLeft=this.sliderDom-(this.imgIndex-1)*this.sliderGroupDom,this.translate3d="translate3d("+this.domLeft+"px, 0px, 0px)"},animateImg:function(t,a){t?this.goBackImg(Math.abs(a)):(this.animateTime=0,this.translate3d="translate3d("+(this.domLeft-this.bridge/this.screenWidth*this.sliderGroupDom)+"px, 0px, 0px)")},init:function(){this.screenWidth=this.$refs.slider.offsetWidth,this.sliderGroupDom=parseFloat((.768*this.screenWidth).toFixed(2)),this.sliderDom=-(this.sliderGroupDom-(this.screenWidth-this.sliderGroupDom)/2),this.goBackImg(0)}},mounted:function(){this.init()}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{ref:"slider",staticClass:"slider",on:{touchmove:function(t){t.preventDefault()}}},[e("div",{ref:"sliderGroup",staticClass:"slider-group",style:{transform:t.translate3d,transitionDuration:t.animateTime+"ms"},on:{transitionend:t.transitionEnd,touchstart:t.touchS,touchend:t.touchE,touchmove:t.touchM}},[t._l(t.recommends,function(a,i){return e("div",{key:i,staticClass:"slider-dots"},[e("div",{staticClass:"dot-con"},[e("div",{staticClass:"left"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.carLogoUrl+a.imageSrc,expression:"carLogoUrl + item.imageSrc"}],attrs:{alt:""}})]),t._v(" "),e("div",{staticClass:"right"},[e("h2",[t._v(t._s(a.manufacturerName+" - "+a.evehicleSystem))]),t._v(" "),e("p",[t._v(t._s(a.carNumber)),e("span",[t._v("l")]),t._v(t._s(a.distance)+"km")]),t._v(" "),e("div",{class:a.defaultFlag?"default":"default-btn",on:{click:function(e){e.preventDefault(),t.setDefault(a,i)}}},[t._v("\n            "+t._s(a.defaultFlag?"已设为默认车辆":"设为默认车辆")+"\n          ")])])])])}),t._v(" "),t.recommends.length?t._e():e("div",{staticClass:"slider-dots",on:{click:t.tapDom}},[e("div",{staticClass:"dot-con",class:t.recommends.length?"":"nocar"})])],2)])},staticRenderFns:[]};var d=e("VU/8")(r,n,!1,function(t){e("NGQ6")},"data-v-e742be3c",null).exports,o=e("NYxO"),c=e("F4+m"),m=e("bk5W"),h=e("fjIZ"),u={name:"garage",components:{Slider:d,datePickerMask:m.a},mixins:[c.a,c.b],data:function(){return{carId:0,datePickerShow:!1,dateInfo:{},modifyWay:null}},created:function(){this._getMyCar()},computed:s()({defaultCarId:function(){var t=0;return this.myCar.forEach(function(a,e){a.defaultFlag&&(t=e)}),t}},Object(o.c)(["myCar","defaultCar","userInfo"])),methods:s()({tempToDate:function(t){return t.time&&"-1"!==t.time?Object(h.d)(parseInt(t.time)):"未添加信息"},showDate:function(){this.datePickerShow=!0},closePicker:function(t){var a=this;this.datePickerShow=!1;var e=this.carId,i=Object(h.a)(),s=Object(h.e)(i.nowYear,i.nowMonth,i.nowDay);t.temp&&(t.temp<s&&t.temp!==this.myCar[e].time?this.modifyCar({carBrandLogo:this.myCar[e].exhaustVolume+"ꡖ"+this.myCar[e].manufacturerName+"ꡖ"+this.myCar[e].year+"ꡖ"+t.temp+"ꡖ"+this.myCar[e].evehicleSystem+"ꡖ"+this.myCar[e].transmissionDesc+"ꡖ"+this.myCar[e].brandName+"ꡖ"+this.myCar[e].imageSrc,carId:this.myCar[e].carId,carNumber:this.myCar[e].carNumber,carVin:this.myCar[e].carVin,clientAppId:this.myCar[e].clientAppId,clientUserId:this.myCar[e].clientUserId,defaultFlag:this.myCar[e].defaultFlag,distance:this.myCar[e].distance,externalUserId:this.myCar[e].externalUserId,userCarId:this.myCar[e].userCarId,userId:this.myCar[e].userId},function(){a.updateCarWay({index:e,obj:{time:t.temp}})}):this.$Toast({position:"bottom",message:"您选择的日期错误，请重新选择"}))},handleModifyWay:function(){var t=this,a=this.carId;this.modifyWay!==this.myCar[a].distance&&this.modifyCar({carBrandLogo:this.myCar[a].exhaustVolume+"ꡖ"+this.myCar[a].manufacturerName+"ꡖ"+this.myCar[a].year+"ꡖ"+this.myCar[a].time+"ꡖ"+this.myCar[a].evehicleSystem+"ꡖ"+this.myCar[a].transmissionDesc+"ꡖ"+this.myCar[a].brandName+"ꡖ"+this.myCar[a].imageSrc,carId:this.myCar[a].carId,carNumber:this.myCar[a].carNumber,carVin:this.myCar[a].carVin,clientAppId:this.myCar[a].clientAppId,clientUserId:this.myCar[a].clientUserId,defaultFlag:this.myCar[a].defaultFlag,distance:this.modifyWay,externalUserId:this.myCar[a].externalUserId,userCarId:this.myCar[a].userCarId,userId:this.myCar[a].userId},function(){t.updateCarWay({index:a,obj:{distance:t.modifyWay}}),t.modifyWay=null})},_getMyCar:function(){var t=this;this.$get(this.f6Url+"/api/clientUserCar?userId="+this.userInfo.fUserId,this.headers_2,function(a){401===a.code?t.refreshToken(t._getMyCar):200===a.code&&t.updateCarList(a.data)})},tapCard:function(t){this.myCar.length<1&&this.$router.push("/addcar-tabbar?type=add")},setDefault:function(t){if(1!==t.item.defaultFlag){var a=this.defaultCarId,e={carBrandLogo:t.item.exhaustVolume+"ꡖ"+t.item.manufacturerName+"ꡖ"+t.item.year+"ꡖ"+t.item.time+"ꡖ"+t.item.evehicleSystem+"ꡖ"+t.item.transmissionDesc+"ꡖ"+t.item.brandName+"ꡖ"+t.item.imageSrc,carId:t.item.carId,carNumber:t.item.carNumber,carVin:t.item.carVin,clientAppId:t.item.clientAppId,clientUserId:t.item.clientUserId,defaultFlag:1,distance:t.item.distance,externalUserId:t.item.externalUserId,userCarId:t.item.userCarId,userId:t.item.userId},i={carBrandLogo:this.myCar[a].exhaustVolume+"ꡖ"+this.myCar[a].manufacturerName+"ꡖ"+this.myCar[a].year+"ꡖ"+this.myCar[a].time+"ꡖ"+this.myCar[a].evehicleSystem+"ꡖ"+this.myCar[a].transmissionDesc+"ꡖ"+this.myCar[a].brandName+"ꡖ"+this.myCar[a].imageSrc,carId:this.myCar[a].carId,carNumber:this.myCar[a].carNumber,carVin:this.myCar[a].carVin,clientAppId:this.myCar[a].clientAppId,clientUserId:this.myCar[a].clientUserId,defaultFlag:0,distance:this.myCar[a].distance,externalUserId:this.myCar[a].externalUserId,userCarId:this.myCar[a].userCarId,userId:this.myCar[a].userId};this.modifyCar(e),this.modifyCar(i),this.updateCarDefault({defaultId:a,modifyId:t.index})}},getCarId:function(t){this.carId=t},_goBack:function(){this.$router.push("/mind")},_goManagement:function(){this.myCar.length<1?this.$Toast({message:"请先添加车辆！",position:"bottom"}):this.$router.push("/vehicle-management")},_goCarAuth:function(){this.myCar.length<1?this.$Toast({message:"请先添加车辆！",position:"bottom"}):this.$router.push("/car-owner?carid="+this.carId)},_goDetectionRecord:function(){this.myCar.length<1?this.$Toast({message:"请先添加车辆！",position:"bottom"}):this.$router.push("/detection-record?carid="+this.carId)}},Object(o.b)(["updateCarList","updateCarWay","updateCarDefault"]))},l={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"garage"},[e("div",{staticClass:"action-bar"},[e("div",{staticClass:"go-back",on:{click:t._goBack}}),t._v(" "),e("div",{staticClass:"font"},[t._v("我的车库")]),t._v(" "),e("div",{staticClass:"vehicle-management",on:{click:t._goManagement}},[t._v("管理")])]),t._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"swiper"},[e("Slider",{attrs:{recommends:t.myCar},on:{tapcard:t.tapCard,carid:t.getCarId,setdefault:t.setDefault}})],1),t._v(" "),e("div",{staticClass:"car-menu"},[e("div",{staticClass:"car-con"},[e("div",{staticClass:"owner",on:{click:t._goCarAuth}},[e("h2",[t._v("车主认证")])]),t._v(" "),e("div",{staticClass:"record",on:{click:t._goDetectionRecord}},[e("h2",[t._v("检测记录")])])])]),t._v(" "),t.myCar.length>0?e("div",{staticClass:"car-idcard"},[e("span",[t._v("车牌号")]),t._v(" "),e("div",{staticClass:"area"},[t._v("\n        "+t._s(t.myCar[t.carId].carNumber.slice(0,1))+"\n      ")]),t._v(" "),e("div",{staticClass:"number"},[t._v("\n        "+t._s(t.myCar[t.carId].carNumber.slice(1,7))+"\n      ")])]):t._e(),t._v(" "),t.myCar.length>0?e("div",{staticClass:"car-info"},[e("div",{staticClass:"car-models"},[e("span",[t._v("具体车型")]),t._v(" "),e("span",[t._v(t._s(t.myCar[t.carId].year+" - "+t.myCar[t.carId].transmissionDesc))])]),t._v(" "),e("div",{staticClass:"car-others"},[e("div",{staticClass:"car-displacement"},[e("span",[t._v("发动机排量")]),t._v(" "),e("span",[t._v(t._s(t.myCar[t.carId].exhaustVolume))])]),t._v(" "),e("div",{staticClass:"car-age"},[e("span",[t._v("生产年份")]),t._v(" "),e("span",[t._v(t._s(t.myCar[t.carId].year))])])]),t._v(" "),e("div",{staticClass:"car-far"},[e("span",[t._v("行驶里程")]),t._v(" "),e("div",{staticClass:"input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modifyWay,expression:"modifyWay"}],attrs:{type:"number",placeholder:t.myCar[t.carId].distance},domProps:{value:t.modifyWay},on:{change:t.handleModifyWay,input:function(a){a.target.composing||(t.modifyWay=a.target.value)}}})]),t._v(" "),e("span",[t._v("km")])]),t._v(" "),e("div",{staticClass:"car-time"},[e("span",[t._v("注册时间")]),t._v(" "),e("span",{on:{click:t.showDate}},[t._v(t._s(t.tempToDate(t.myCar[t.carId])))])])]):t._e()]),t._v(" "),t.datePickerShow?e("datePickerMask",{on:{close:t.closePicker}}):t._e()],1)},staticRenderFns:[]};var f=e("VU/8")(u,l,!1,function(t){e("AtMv")},"data-v-00bc7d32",null);a.default=f.exports}});