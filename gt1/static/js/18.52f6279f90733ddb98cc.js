webpackJsonp([18],{BlXb:function(s,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("aA9S"),e=a.n(i),r=a("4YfN"),c=a.n(r),n=a("qwAB"),o=a("9rMa"),h={name:"searchCity",data:function(){return{format:"",serachVal:"",lists:[],showList:[]}},created:function(){this.format=this.$route.query.format,this.init()},computed:c()({history:function(){return"store"===this.format?this.serachHis.store:"city"===this.format?this.serachHis.city:"brand"===this.format?this.serachHis.brand:void 0}},Object(o.b)(["cityList","carBrand","storeList","serachHis"])),methods:c()({searchList:function(s,t){var a=""+(s.data?s.data:this.serachVal);this.serachModel(a)},serachModel:function(s){var t=this,a=RegExp(s);this.serachVal?(this.showList=[],"store"===this.format?this.lists.forEach(function(i){(a.test(i.name)||a.test(i.address))&&t.showList.push(e()(i,{spanname:i.name.replace(a,'<span class="red">'+s+"</span>"),spanaddress:i.address.replace(a,'<span class="red">'+s+"</span>")}))}):"city"===this.format?this.lists.forEach(function(i){a.test(i.cityName)&&t.showList.push(e()(i,{spancityName:i.cityName.replace(a,'<span class="red">'+s+"</span>")}))}):"brand"===this.format&&this.lists.forEach(function(i){a.test(i.name)&&t.showList.push(e()(i,{spanname:i.name.replace(a,'<span class="red">'+s+"</span>")}))})):this.showList=[]},searchBtn:function(){var s=this,t=!0;this.serachHis[this.format].forEach(function(a){a===s.serachVal&&(t=!1)}),t&&this.serachVal.length>0&&this.setSerachHis({type:this.format,search:this.serachVal})},_goBack:function(){this.$router.back()},clearSearchVal:function(){this.serachVal="",this.showList=[]},init:function(){"store"===this.format?this.lists=this.storeList:"city"===this.format?this.lists=this.cityList:"brand"===this.format&&(this.lists=this.carBrand)},seleItem:function(s){this.setSerachInfo(s),"store"===this.format?this.$router.push("/washcar?type=serach"):"city"===this.format?(this.modifyCityInfo({selecity:s.cityName}),this.$router.push("/home")):"brand"===this.format&&this.$router.push("/addcar-tabbar?type=sele"),this.searchBtn()},delHis:function(s){this.deleteSerachHis({type:this.format,index:s})},searchHisVal:function(s){this.serachVal=s,this.serachModel(s)}},Object(o.c)({modifyCityInfo:"MODIFY_CITYINFO",setSerachHis:"SET_SERACHHIS",setSerachInfo:"SET_SERACHINFO",deleteSerachHis:"DELETE_SERACHHIS"})),components:{Scroll:n.a}},l={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"add-car-sharing",attrs:{flexContainer:""}},[a("div",{staticClass:"action-bar"},[a("div",{staticClass:"go-back",on:{click:s._goBack}}),s._v(" "),a("div",{staticClass:"serach-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:s.serachVal,expression:"serachVal"}],attrs:{type:"text",placeholder:"搜索门店",maxlength:"12"},domProps:{value:s.serachVal},on:{input:[function(t){t.target.composing||(s.serachVal=t.target.value)},s.searchList]}}),s._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:s.serachVal.length>0,expression:"serachVal.length > 0"}],staticClass:"close-btn",on:{click:s.clearSearchVal}})]),s._v(" "),a("div",{staticClass:"search",on:{click:s.searchBtn}},[s._v("搜索")])]),s._v(" "),a("Scroll",{staticClass:"list"},[s.serachVal.length<1?a("div",{staticClass:"his-list"},[a("ul",s._l(s.history,function(t,i){return a("li",{key:i},[a("div",{staticClass:"info",on:{click:function(a){s.searchHisVal(t)}}},[s._v(s._s(t))]),s._v(" "),a("div",{staticClass:"btn",on:{click:function(t){s.delHis(i)}}})])}))]):a("div",{staticClass:"list-con"},["brand"===s.format?a("ul",{staticClass:"brand-list"},s._l(s.showList,function(t,i){return a("li",{key:i,staticClass:"list-info",on:{click:function(a){s.seleItem(t)}}},[a("div",{staticClass:"img"},[a("img",{attrs:{src:s.carLogoUrl+t.imageSrc,alt:""}})]),s._v(" "),a("div",{staticClass:"list-title",domProps:{innerHTML:s._s(t.spanname)}})])})):"store"===s.format?a("ul",{staticClass:"store-list"},s._l(s.showList,function(t,i){return a("li",{key:i,on:{click:function(a){s.seleItem(t)}}},[a("div",{staticClass:"left"},[a("h2",{domProps:{innerHTML:s._s(t.spanname)}}),s._v(" "),a("p",{domProps:{innerHTML:s._s(t.spanaddress)}})]),s._v(" "),a("div",{staticClass:"right"},[s._v("\n            "+s._s((t.way/1e3).toFixed(2))+"km\n          ")])])})):"city"===s.format?s._l(s.showList,function(t,i){return a("ul",{key:i,staticClass:"city-list"},[a("li",{staticClass:"list-info",domProps:{innerHTML:s._s(t.spancityName)},on:{click:function(a){s.seleItem(t)}}})])}):s._e()],2)])],1)},staticRenderFns:[]};var d=a("Z0/y")(h,l,!1,function(s){a("ovYc"),a("tIfV")},"data-v-2e02bd54",null);t.default=d.exports},ovYc:function(s,t){},tIfV:function(s,t){}});
//# sourceMappingURL=18.52f6279f90733ddb98cc.js.map