webpackJsonp([21],{P6bO:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("Dd8w"),i=s.n(o),r=s("NYxO"),n={name:"setcode",data:function(){return{number:null,codeArr:[],flag:!0,timer:null,seconds:60,type:0,phone:"0"}},watch:{number:function(t,e){this.codeArr=t.split("")}},methods:i()({_goBack:function(){this.$router.go(-1)},goBtn:function(){this.flag||(this.seconds=60,this.flag=!0,this._setTimeout(),this.getYzm())},getYzm:function(){var t=this;this.$post(this.gt1Url+"/api/f6-app/getMobileMsg",this.headers_1,function(e){e.errorCode?0!==e.errorCode&&t.$Toast({message:e.errorMsg,position:"bottom"}):t.$Toast({message:"验证码获取失败",position:"bottom"})},{phone:this.phone,type:this.type})},foucsInput:function(){this.$refs.number.focus()},_setTimeout:function(){var t=this;this.timer=setTimeout(function(){t.seconds<2?(clearTimeout(t.timer),t.flag=!1):(t.seconds--,t._setTimeout())},1e3)},_filterCode:function(t){6===this.number.length&&(1===parseInt(this.type)?this.registerRequest():parseInt(this.type)>1&&this.loginRequest())},loginRequest:function(){var t=this;this.$post(this.gt1Url+"/api/f6-app/login",this.headers_1,function(e){0===e.errorCode?0===e.data.code?(t.$router.replace("/home"),console.log(e.data.data),t.updateUserInfo(e.data.data)):t.$Toast({position:"bottom",message:e.data.msg}):t.$Toast({position:"bottom",message:e.errorCode})},{userTel:this.phone,code:this.number,thirdId:(this.type,null),type:2===this.type?1:0,loginType:2===this.type?1:0})},registerRequest:function(){this.$post(this.gt1Url+"/api/f6-app/regist",this.headers_1,function(t){console.log(t)},{userTel:this.phone,code:this.number})}},Object(r.b)(["updateUserInfo"])),created:function(){this.type=this.$route.query.type,this.phone=this.$route.query.phone},mounted:function(){this._setTimeout()},beforeDestroy:function(){clearTimeout(this.timer)}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"setcode"},[s("div",{staticClass:"title"},[s("div",{staticClass:"register",on:{click:t._goBack}})]),t._v(" "),s("div",{staticClass:"section"},[s("h1",[t._v("验证码已发送")]),t._v(" "),s("div",{staticClass:"input",on:{click:t.foucsInput}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.number,expression:"number"}],ref:"number",attrs:{type:"number",name:"",pattern:"[0-9]*"},domProps:{value:t.number},on:{input:[function(e){e.target.composing||(t.number=e.target.value)},t._filterCode]}}),t._v(" "),s("ul",[s("li",[t._v(t._s(t.codeArr[0]?t.codeArr[0]:""))]),t._v(" "),s("li",[t._v(t._s(t.codeArr[1]?t.codeArr[1]:""))]),t._v(" "),s("li",[t._v(t._s(t.codeArr[2]?t.codeArr[2]:""))]),t._v(" "),s("li",[t._v(t._s(t.codeArr[3]?t.codeArr[3]:""))]),t._v(" "),s("li",[t._v(t._s(t.codeArr[4]?t.codeArr[4]:""))]),t._v(" "),s("li",[t._v(t._s(t.codeArr[5]?t.codeArr[5]:""))])])]),t._v(" "),s("h2",[t._v("请输入验证短信中的验证码")]),t._v(" "),s("div",{staticClass:"btn",class:t.flag?"active":"unactive",on:{click:t.goBtn}},[t._v("\n      "+t._s(t.flag?t.seconds+"s后重新获取":"重新获取")+"\n    ")])])])},staticRenderFns:[]};var c=s("VU/8")(n,a,!1,function(t){s("lOcq")},"data-v-a5aafd4e",null);e.default=c.exports},lOcq:function(t,e){}});